<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Manis Tak Seindah Akhirnya</title>
    <link rel="stylesheet" href="../styling.css" />
    <link rel="icon" type="image/x-icon" href="../assets/favicon.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Lusitana&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
    <script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>
  </head>

  <body>
    <div
      class="container"
      style="--fd: column; --jc: center; --ai: center; height: 100vh"
    >
      <div
        id="wrapper"
        class="container"
        style="
          --fd: column;
          --jc: center;
          --ai: center;
          height: 100vh;
          width: 100vw;
        "
      >
        <audio id="clicked" src="../assets/clicked.mp3"></audio>
        <audio
          id="backsound"
          loop
          src="../assets/Divine Life Society - Jesse Gallagher.mp3"
        ></audio>
        <img
          id="BGMPlay"
          src="../assets/pause.svg"
          alt="audio controls"
          style="
            width: 30px;
            background-color: #57aeda;
            border-radius: 50%;
            padding: 5px;
            position: fixed;
            top: 1%;
            left: 1%;
          "
          onclick="audioPlay(this)"
        />
        <img
          id="BGMPause"
          src="../assets/play.svg"
          alt="audio controls"
          style="
            width: 30px;
            background-color: #57aeda;
            border-radius: 50%;
            padding: 5px;
            position: fixed;
            top: 1%;
            left: 1%;
            display: none;
          "
          onclick="audioPause(this)"
        />
        <div id="contain">
          <h1 style="text-align: center">Saran untuk Penderita Diabetes</h1>
          <div
            id="video"
            style="
              margin: 50px auto;
              max-width: 70vw;
              border: 15px solid;
              border-image-slice: 1;
              border-image-source: linear-gradient(
                to bottom right,
                #084270,
                #b1cbd9,
                #084270
              );
            "
          >
            <video preload="auto" controls crossorigin playsinline>
              <source src="../assets/video/saran2.mp4" type="video/mp4" />
            </video>
          </div>
        </div>
        <a
          href="../pages/addition.html"
          class="heartbeat"
          style="
            position: fixed;
            bottom: 1%;
            right: 1%;
            width: 12vw;
            --dur: 1.5s;
            --delay: 0.5s;
            display: none;
          "
          id="lanjut"
          ><img src="../assets/ljtBtn.svg" alt="lanjut button"
        /></a>
      </div>
      <div
        id="myModal"
        class="container"
        style="
          --jc: center;
          --ai: center;
          overflow: auto;
          background-color: rgba(0, 0, 0, 0);
        "
      >
        <!-- Modal content -->
        <div class="modal-content">
          <p>
            Maksimalkan pengalaman mengeksplorasi newsgames "Manis Tak Seindah
            Akhirnya" dengan memutar layar perangkat menjadi mode lanskap
          </p>
        </div>
      </div>
    </div>
    <script>
      function play_single_sound(target) {
        document.getElementById(target).play();
      }

      function newPage(url) {
        location.href = url;
      }

      function playThenRedirectTo(audioTarget, url) {
        var time = 0;

        play_single_sound(audioTarget);

        setInterval(function () {
          var end = document.getElementById(audioTarget).played.end(0);
          if (end > time) {
            time = end;
          } else {
            newPage(url);
          }
        }, 0);
      }
      document.getElementById("lanjut").onclick = function (evt) {
        evt = evt || window.event;

        playThenRedirectTo("clicked", this.href);
        // prevent the link from being followed, until we want to later on
        if (evt.preventDefault) {
          evt.preventDefault();
        } else {
          evt.returnValue = false;
        }
      };
      document.getElementById("video").addEventListener(
        "ended",
        function () {
          document.getElementById("lanjut").style.display = "block";
        },
        true
      );
      var sound = document.getElementById("backsound");
      function audioPlay(img) {
        sound.play();
        sound.volume = 0.35;
        document.getElementById("BGMPause").style.display = "block";
      }
      function audioPause(img) {
        sound.pause();
        document.getElementById("BGMPause").style.display = "none";
      }
    </script>
    <script type="text/javascript">
      const player = new Plyr("video", { captions: { active: true } });

      // Expose player so it can be used from the console
      window.player = player;
    </script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Manis Tak Seindah Akhirnya</title>
    <link rel="stylesheet" href="./src/styling.css" />
    <link rel="icon" type="image/x-icon" href="./src/assets/favicon.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins&display=swap"
      rel="stylesheet"
    />
  </head>
  <body
    oncontextmenu="return false"
    style="background-image: url(./src/assets/LatarBelakang.jpg)"
  >
    <div
      class="container"
      style="--fd: column; --jc: center; --ai: center; height: 100vh"
    >
      <div
        class="container"
        id="wrapper"
        style="
          --fd: column;
          --jc: flex-start;
          --ai: center;
          --as: flex-end;
          width: 50vw;
          height: 100vh;
        "
      >
        <audio id="clicked" src="./src/assets/clicked.mp3"></audio>
        <audio
          id="backsound"
          loop
          src="./src/assets/Divine Life Society - Jesse Gallagher.mp3"
        ></audio>
        <img
          id="BGMPlay"
          src="./src/assets/pause.svg"
          alt="audio controls"
          style="
            width: 30px;
            background-color: #57aeda;
            border-radius: 50%;
            padding: 5px;
            position: fixed;
            top: 1%;
            left: 1%;
          "
          onclick="audioPlay(this)"
        />
        <img
          id="BGMPause"
          src="./src/assets/play.svg"
          alt="audio controls"
          style="
            width: 30px;
            background-color: #57aeda;
            border-radius: 50%;
            padding: 5px;
            position: fixed;
            top: 1%;
            left: 1%;
            display: none;
          "
          onclick="audioPause(this)"
        />
        <img
          style="width: 50vw; height: 30vh"
          src="./src/assets/title.png"
          alt="Title"
        />
        <a href="./src/pages/introduce.html" id="startBtn"
          ><img
            style="width: 20vw; height: 10vh"
            src="./src/assets/startBtn.svg"
            alt="Start Button"
            onmouseenter="startBtnClicked()"
            onmouseleave="startBtnRelease()"
        /></a>
      </div>

      <!-- The Modal -->
      <div
        id="myModal"
        class="container"
        style="
          --jc: center;
          --ai: center;
          overflow: auto;
          background-color: rgba(0, 0, 0, 0);
        "
      >
        <!-- Modal content -->
        <div class="modal-content">
          <p>
            Maksimalkan pengalaman mengeksplorasi newsgames "Manis Tak Seindah
            Akhirnya" dengan memutar layar perangkat menjadi mode lanskap
          </p>
        </div>
      </div>
    </div>
    <script>
      function startBtnClicked() {
        document.getElementById("startBtn").src =
          "./src/assets/startBtnClick.svg";
      }
      function startBtnRelease() {
        document.getElementById("startBtn").src = "./src/assets/startBtn.svg";
      }
      // document.getElementById("startBtn").onclick = function () {
      //   document.getElementById("clicked").play();
      //   location.href = this.href;
      // };
      function play_single_sound(target) {
        document.getElementById(target).play();
      }

      function newPage(url) {
        location.href = url;
      }

      function playThenRedirectTo(audioTarget, url) {
        var time = 0;

        play_single_sound(audioTarget);

        setInterval(function () {
          var end = document.getElementById(audioTarget).played.end(0);
          if (end > time) {
            time = end;
          } else {
            newPage(url);
          }
        }, 250);
      }
      document.getElementById("startBtn").onclick = function (evt) {
        evt = evt || window.event;

        playThenRedirectTo("clicked", this.href);
        // prevent the link from being followed, until we want to later on
        if (evt.preventDefault) {
          evt.preventDefault();
        } else {
          evt.returnValue = false;
        }
      };

      var sound = document.getElementById("backsound");
      function audioPlay(img) {
        sound.play();
        sound.volume = 0.35;
        document.getElementById("BGMPause").style.display = "block";
      }
      function audioPause(img) {
        sound.pause();
        document.getElementById("BGMPause").style.display = "none";
      }
    </script>
  </body>
</html>
